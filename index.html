<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GlobalGlide360 - Itinerari AI</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:Arial,sans-serif;color:#222;background:#fff;line-height:1.4;}

    header{
      position:fixed;top:0;left:0;width:100%;
      background:rgba(255,255,255,0.9);backdrop-filter:blur(6px);
      display:flex;justify-content:space-between;align-items:center;
      padding:10px 20px;box-shadow:0 2px 6px rgba(0,0,0,0.1);z-index:1000;
    }
    header img{height:36px;}
    header h1{color:#0077b6;font-size:18px;margin-left:6px;}
    header button{
      background:#0077b6;color:white;border:none;padding:8px 14px;
      border-radius:8px;font-weight:bold;
    }

    .hero{
      position:relative;height:100vh;overflow:hidden;
      display:flex;align-items:center;justify-content:center;
    }
    .hero img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;}
    .hero::after{content:'';position:absolute;inset:0;background:rgba(0,0,0,0.5);}
    .hero-content{
      position:relative;z-index:1;text-align:center;color:white;padding:20px;
      max-width:800px;
    }
    .hero-content h2{font-size:32px;margin-bottom:20px;}
    .hero-content p{font-size:18px;margin-bottom:20px;}
    .hero-content button{
      background:#00b4d8;color:white;border:none;padding:12px 20px;
      font-size:18px;border-radius:8px;width:80%;max-width:300px;
    }

    /* Modulo ricerca */
    .search-section{
      background:#f8f8f8;
      padding:30px 20px;
      text-align:center;
    }
    .search-section form{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
      max-width:600px;
      margin:0 auto;
    }
    .search-section input, .search-section select{
      padding:12px;
      border:1px solid #ccc;
      border-radius:6px;
      font-size:16px;
      width:100%;
    }
    .search-section button{
      background:#0077b6;
      color:white;
      padding:12px;
      border:none;
      border-radius:6px;
      font-size:16px;
      cursor:pointer;
    }
    @media(min-width:768px){
      .search-section form{
        grid-template-columns:repeat(2,1fr);
      }
      .search-section button{
        grid-column:span 2;
      }
    }

    section{padding:80px 20px;}
    h3{text-align:center;font-size:26px;color:#0077b6;margin-bottom:40px;}

    .grid{display:grid;gap:20px;}
    .box{
      background:white;padding:20px;border-radius:10px;text-align:center;
      box-shadow:0 4px 8px rgba(0,0,0,0.1);
    }
    .box span{font-size:40px;display:block;margin-bottom:10px;}
    @media(min-width:768px){
      .grid{grid-template-columns:repeat(3,1fr);}
      .hero-content h2{font-size:42px;}
    }

    /* Risultati */
    #results{max-width:800px;margin:20px auto;padding:10px;}
    .card{background:#f8f8f8;padding:10px;border-radius:6px;margin-bottom:10px;}

    .cta{background:#00b4d8;text-align:center;color:white;}
    .cta input{
      padding:10px;width:80%;max-width:280px;border:none;border-radius:6px;margin-bottom:10px;
    }
    .cta button{
      padding:10px 16px;border:none;border-radius:6px;background:#0077b6;color:white;
      width:80%;max-width:280px;
    }

    .about{background:#f8f8f8;text-align:center;}
    .about p{max-width:700px;margin:0 auto;}

    footer{background:#222;color:#ccc;text-align:center;font-size:14px;padding:20px;}
    .social a{margin:0 8px;color:white;text-decoration:none;font-size:20px;}
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div style="display:flex;align-items:center;">
      <img src="logo-globalglide360.png" alt="GlobalGlide360">
      <h1>GlobalGlide360</h1>
    </div>
    <button>Scopri</button>
  </header>

  <!-- HERO -->
  <section class="hero">
    <img src="hero-travel.png" alt="Hero Travel">
    <div class="hero-content">
      <h2>Il tuo viaggio perfetto, creato da un'AI</h2>
      <p>Voli, hotel e attivit√† ai migliori prezzi in pochi click.</p>
      <button>Inizia ora</button>
    </div>
  </section>

  <!-- SEZIONE RICERCA -->
  <section class="search-section">
    <h3>Crea il tuo itinerario personalizzato</h3>
    <form id="travel-form">
      <input type="text" name="destinazione" placeholder="Destinazione (es. Parigi)" required>
      <input type="date" name="data-partenza" required>
      <input type="date" name="data-ritorno" required>
      <button type="submit">Cerca itinerario</button>
    </form>
  </section>

  <!-- COME FUNZIONA -->
  <section>
    <h3>Come funziona</h3>
    <div class="grid">
      <div class="box"><span>üõ´</span><h4>1. Inserisci la meta</h4><p>Destinazione, date e budget.</p></div>
      <div class="box"><span>ü§ñ</span><h4>2. L'AI cerca per te</h4><p>Voli, hotel e esperienze in tempo reale.</p></div>
      <div class="box"><span>üìç</span><h4>3. Ricevi l'itinerario</h4><p>Piano completo con link prenotabili.</p></div>
    </div>
  </section>

  <!-- CHI SIAMO -->
  <section class="about">
    <h3>Chi siamo</h3>
    <p>Siamo un team appassionato di viaggi e tecnologia. GlobalGlide360 aiuta famiglie e viaggiatori a creare itinerari personalizzati senza intermediazioni.</p>
  </section>

  <!-- RISULTATI -->
  <div id="results"></div>

  <!-- CTA FORM (Mailchimp) -->
  <section class="cta">
    <h3>Vuoi ricevere itinerari come questo?</h3>
    <form action="https://globalglide360.us22.list-manage.com/subscribe/post?u=b9c083780b3620b61c9db125f&amp;id=9a97dacd51&amp;f_id=00efc2e1f0"
          method="post"
          target="_blank"
          onsubmit="document.getElementById('success-message').style.display='block';">
      
      <input type="email" name="EMAIL" placeholder="Inserisci la tua email" required>
      <input type="submit" value="Iscriviti">
      <div id="success-message" class="success-message" style="display:none; color:white;">‚úÖ Grazie per esserti iscritto!</div>
    </form>
  </section>

  <!-- CONTATTI -->
  <section>
    <h3>Contatti</h3>
    <p style="text-align:center;">
      Scrivici a <strong>info@globalglide360.com</strong><br>
      oppure seguici sui social
    </p>
    <div class="social" style="text-align:center;margin-top:20px;">
      <a href="#">üì∏ Instagram</a>
      <a href="#">üìò Facebook</a>
      <a href="mailto:info@globalglide360.com">‚úâÔ∏è Email</a>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <p>¬© 2025 GlobalGlide360 ‚Äì Tutti i diritti riservati</p>
    <p>GlobalGlide360 non vende pacchetti turistici. I contenuti sono informativi con link affiliati.</p>
  </footer>

  <script>
  const form = document.getElementById("travel-form");
  const results = document.getElementById("results");

  // Mappa codici IATA (semplificata, possiamo espanderla dopo)
  const cityToIATA = {
    "roma": "ROM",
    "milano": "MIL",
    "parigi": "PAR",
    "londra": "LON",
    "lisbona": "LIS",
    "new york": "NYC",
    "barcellona": "BCN"
  };

  const clientId = "kDR8582BVq2qikHZUQAaUBLlZNzTVp50";
  const clientSecret = "6e8Wjj1R9axfFAIx";
  let token = null;

  async function getToken() {
    const res = await fetch("https://test.api.amadeus.com/v1/security/oauth2/token", {
      method: "POST",
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      body: `grant_type=client_credentials&client_id=${clientId}&client_secret=${clientSecret}`
    });
    const data = await res.json();
    return data.access_token;
  }

  form.addEventListener("submit", async e => {
    e.preventDefault();
    results.innerHTML = "‚è≥ Ricerca in corso...";

    let destinazione = form.elements["destinazione"].value.trim().toLowerCase();
    const dataPartenza = form.elements["data-partenza"].value;

    // Conversione nome citt√† in codice IATA
    if (cityToIATA[destinazione]) {
      destinazione = cityToIATA[destinazione];
    }

    try {
      if (!token) token = await getToken();

      // Chiamata voli
      const voliRes = await fetch(`https://test.api.amadeus.com/v2/shopping/flight-offers?originLocationCode=MIL&destinationLocationCode=${destinazione}&departureDate=${dataPartenza}&adults=1&currencyCode=EUR`, {
        headers: { Authorization: `Bearer ${token}` }
      });
      const dataVoli = await voliRes.json();

      // Chiamata hotel
      const hotelRes = await fetch(`https://test.api.amadeus.com/v2/shopping/hotel-offers?cityCode=${destinazione}`, {
        headers: { Authorization: `Bearer ${token}` }
      });
      const dataHotel = await hotelRes.json();

      // Chiamata attivit√† (per ora coordinate fisse Parigi, da adattare)
      const attivitaRes = await fetch(`https://test.api.amadeus.com/v1/shopping/activities?latitude=48.8566&longitude=2.3522&radius=10`, {
        headers: { Authorization: `Bearer ${token}` }
      });
      const dataAttivita = await attivitaRes.json();

      // Mostra risultati
      results.innerHTML = "<h3>Itinerario trovato:</h3>";

      if (dataVoli.data && dataVoli.data.length > 0) {
        results.innerHTML += `<div class="card">‚úàÔ∏è Volo pi√π economico: ${dataVoli.data[0].price.total}‚Ç¨</div>`;
      } else {
        results.innerHTML += `<div class="card">‚úàÔ∏è Nessun volo trovato</div>`;
      }

      if (dataHotel.data && dataHotel.data.length > 0) {
        results.innerHTML += `<div class="card">üè® Hotel suggerito: ${dataHotel.data[0].hotel.name}</div>`;
      } else {
        results.innerHTML += `<div class="card">üè® Nessun hotel trovato</div>`;
      }

      if (dataAttivita.data && dataAttivita.data.length > 0) {
        results.innerHTML += `<div class="card">üéüÔ∏è Attivit√†: ${dataAttivita.data[0].name}</div>`;
      } else {
        results.innerHTML += `<div class="card">üéüÔ∏è Nessuna attivit√† trovata</div>`;
      }

    } catch (error) {
      console.error(error);
      results.innerHTML = "‚ùå Errore durante la ricerca. Controlla le credenziali API o la destinazione.";
    }
  });
  </script>
</body>
</html>
