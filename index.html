<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GlobalGlide360 – Risultati reali (Skyscanner • Booking • GetYourGuide)</title>
  <style>
    :root{--bg:#0b1220;--card:#121a2b;--muted:#95a7c7;--text:#eaf0ff;--accent:#38bdf8;--ok:#22c55e}
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#0b1220;color:var(--text)}
    .container{max-width:1100px;margin:0 auto;padding:16px}
    header{position:sticky;top:0;background:rgba(8,16,33,.7);backdrop-filter:blur(8px);border-bottom:1px solid #1c2740}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:10px 4px}
    .brand{display:flex;align-items:center;gap:12px}.logo{height:48px}
    .hero{display:grid;grid-template-columns:1.1fr .9fr;gap:24px;align-items:center;padding:26px 0}
    @media (max-width:900px){.hero{grid-template-columns:1fr}}
    .headline{font-size:2rem;margin:0 0 6px}.sub{color:var(--muted);margin:0 0 14px}
    .card{background:var(--card);border:1px solid #1e2a46;border-radius:16px;box-shadow:0 8px 24px rgba(2,12,36,.35)}
    .search{padding:16px}
    .tabs{display:flex;gap:8px;margin:8px 0 14px}
    .tab{flex:1;text-align:center;padding:10px 12px;border:1px solid #2a3a61;background:#0f1830;color:#cfe2ff;border-radius:999px;cursor:pointer}
    .tab.active{background:linear-gradient(180deg,#132448,#0f1b35);border-color:#3a4f80}
    form{display:grid;grid-template-columns:repeat(6,1fr);gap:10px}
    @media (max-width:800px){form{grid-template-columns:1fr 1fr}}
    label{font-size:.82rem;color:#c8d6fb} input,select,button{width:100%;padding:10px 12px;border:1px solid #2a3a61;border-radius:10px;background:#0f1830;color:#eaf0ff}
    .one-line{grid-column:1/-1}.btn{background:linear-gradient(180deg,#38bdf8,#0ea5e9);border:none;font-weight:700;cursor:pointer}
    .btn:hover{filter:brightness(1.05)} .btn-alt{background:linear-gradient(180deg,#22c55e,#16a34a)}
    .chips{display:flex;flex-wrap:wrap;gap:8px}.chip{display:inline-flex;align-items:center;gap:6px;border:1px solid #284064;background:#0f1830;border-radius:999px;padding:6px 10px}
    .section{margin:26px 0;padding:16px}.muted{color:var(--muted)}
  </style>
</head>
<body>
<header>
  <div class="container nav">
    <div class="brand">
      <img class="logo" src="logo-globalglide360.png" alt="GlobalGlide360" />
      <strong>GlobalGlide360</strong>
    </div>
    <div>Prezzi reali da fonti ufficiali</div>
  </div>
</header>

<main class="container">
  <section class="hero">
    <div>
      <h1 class="headline">Cerca <span style="color:var(--accent)">voli</span>, <span style="color:var(--ok)">hotel</span> ed esperienze con risultati reali</h1>
      <p class="sub">La ricerca apre direttamente Skyscanner, Booking e GetYourGuide con i campi già compilati.</p>
      <div class="chips" aria-label="Preferenze di viaggio">
        <label class="chip"><input type="checkbox" checked /> Famiglia</label>
        <label class="chip"><input type="checkbox" /> Mare</label>
        <label class="chip"><input type="checkbox" /> Natura</label>
        <label class="chip"><input type="checkbox" /> Cultura</label>
        <label class="chip"><input type="checkbox" /> Città</label>
      </div>
    </div>

    <div class="card search">
      <div class="tabs">
        <div class="tab active" id="tab-flights" role="button" tabindex="0" aria-controls="panel-flights">Voli (Skyscanner)</div>
        <div class="tab" id="tab-hotels" role="button" tabindex="0" aria-controls="panel-hotels">Hotel (Booking)</div>
        <div class="tab" id="tab-exps" role="button" tabindex="0" aria-controls="panel-exps">Esperienze (GetYourGuide)</div>
      </div>

      <!-- VOLI -->
      <section id="panel-flights" aria-labelledby="tab-flights">
        <form id="form-flights">
          <div>
            <label>Da (IATA)*</label>
            <input id="f-from" placeholder="ROM, MIL, FCO, MXP…" maxlength="3" required />
          </div>
          <div>
            <label>A (IATA)*</label>
            <input id="f-to" placeholder="PAR, LON, ATH…" maxlength="3" required />
          </div>
          <div>
            <label>Partenza*</label>
            <input id="f-dep" type="date" required />
          </div>
          <div>
            <label>Ritorno</label>
            <input id="f-ret" type="date" />
          </div>
          <div>
            <label>Adulti</label>
            <input id="f-adults" type="number" min="1" value="1" />
          </div>
          <div>
            <label>Classe</label>
            <select id="f-cabin">
              <option value="economy" selected>Economy</option>
              <option value="premiumeconomy">Premium</option>
              <option value="business">Business</option>
              <option value="first">First</option>
            </select>
          </div>
          <div class="one-line">
            <button class="btn" type="submit">Cerca su Skyscanner</button>
          </div>
          <small class="muted one-line">Apro la pagina risultati di Skyscanner con i parametri già inseriti.</small>
        </form>
      </section>

      <!-- HOTEL -->
      <section id="panel-hotels" aria-labelledby="tab-hotels" hidden>
        <form id="form-hotels">
          <div class="one-line">
            <label>Destinazione*</label>
            <input id="h-dest" placeholder="Tokyo, Bali, Parigi…" required />
          </div>
          <div>
            <label>Check-in*</label>
            <input id="h-in" type="date" required />
          </div>
          <div>
            <label>Check-out*</label>
            <input id="h-out" type="date" required />
          </div>
          <div>
            <label>Adulti</label>
            <input id="h-adults" type="number" min="1" value="2" />
          </div>
          <div>
            <label>Camere</label>
            <input id="h-rooms" type="number" min="1" value="1" />
          </div>
          <div class="one-line">
            <button class="btn btn-alt" type="submit">Cerca su Booking</button>
          </div>
          <small class="muted one-line">Apro la pagina risultati di Booking con date e occupanti già compilati.</small>
        </form>
      </section>

      <!-- ESPERIENZE -->
      <section id="panel-exps" aria-labelledby="tab-exps" hidden>
        <form id="form-exps">
          <div class="one-line">
            <label>Destinazione / Città*</label>
            <input id="x-dest" placeholder="Parigi, Roma, Tokyo…" required />
          </div>
          <div>
            <label>Dal</label>
            <input id="x-from" type="date" />
          </div>
          <div>
            <label>Al</label>
            <input id="x-to" type="date" />
          </div>
          <div>
            <label>Persone</label>
            <input id="x-pax" type="number" min="1" value="2" />
          </div>
          <div class="one-line">
            <button class="btn" type="submit">Cerca su GetYourGuide</button>
          </div>
          <small class="muted one-line">Apro la pagina risultati di GetYourGuide filtrata per città (e date se fornite).</small>
        </form>
      </section>
    </div>
  </section>

  <section class="section card">
    <h3 style="margin-top:0">Come funziona</h3>
    <p class="muted">Compili i campi ➜ ti reindirizziamo a <strong>Skyscanner</strong>, <strong>Booking</strong> o <strong>GetYourGuide</strong> con la ricerca già pronta. Sono risultati <strong>ufficiali e prenotabili</strong>. Quando le affiliazioni saranno attive, aggiungeremo i parametri partner per tracciare le commissioni e (se disponibili) i widget/API per mostrare prezzi in pagina.</p>
  </section>
</main>

<script>
/* =========
   PARTNER IDS (metti i tuoi quando approvati)
   ========= */
const SKY_PARTNER = "";      // es. &associateid=SKY_xxx (se previsto dal tuo account)
const BKG_AID     = "";      // es. &aid=1234567
const GYG_PARTNER_ID = "";   // es. &partner_id=ABCDE

/* =========
   UTIL
   ========= */
const $ = (id) => document.getElementById(id);
const pad = (n)=> n.toString().padStart(2,'0');
const toYMD = (d)=> {
  const t = new Date(d); if (isNaN(t)) return "";
  return t.getFullYear()+"-"+pad(t.getMonth()+1)+"-"+pad(t.getDate());
};
const cleanIATA = (v)=> (v||"").trim().toUpperCase().slice(0,3);

/* =========
   TABS
   ========= */
const tabs = [
  {btn:'tab-flights', panel:'panel-flights'},
  {btn:'tab-hotels',  panel:'panel-hotels'},
  {btn:'tab-exps',    panel:'panel-exps'},
];
tabs.forEach(t=>{
  $(t.btn).onclick = ()=> activate(t.btn);
  $(t.btn).onkeydown = (e)=>{ if(e.key==='Enter'||e.key===' ') activate(t.btn) };
});
function activate(id){
  tabs.forEach(t=>{
    const active = (t.btn===id);
    $(t.btn).classList.toggle('active', active);
    $(t.panel).hidden = !active;
  });
}

/* =========
   VOLI → Skyscanner
   URL tipo:
   https://www.skyscanner.net/transport/flights/FCO/CDG/2025-10-10/2025-10-15/?adults=2&cabinclass=economy&locale=it-IT&currency=EUR
   ========= */
$('form-flights').addEventListener('submit', (e)=>{
  e.preventDefault();
  const from = cleanIATA($('f-from').value);
  const to   = cleanIATA($('f-to').value);
  const dep  = toYMD($('f-dep').value);
  const retV = toYMD($('f-ret').value);
  const ad   = Math.max(1, parseInt($('f-adults').value || '1', 10));
  const cabin= $('f-cabin').value || 'economy';

  if(!from || !to || !dep){ alert('Compila Da, A e Partenza'); return; }

  const base = `https://www.skyscanner.net/transport/flights/${from}/${to}/${dep}${retV?`/${retV}`:""}/`;
  const params = new URLSearchParams({
    adults: ad, cabinclass: cabin, locale: 'it-IT', currency: 'EUR'
  });
  // opzionale: partner id se previsto
  if(SKY_PARTNER) params.append('associateid', SKY_PARTNER);

  window.open(`${base}?${params.toString()}`, '_blank', 'noopener');
});

/* =========
   HOTEL → Booking.com
   URL tipo:
   https://www.booking.com/searchresults.html?ss=Paris&checkin=2025-10-10&checkout=2025-10-15&group_adults=2&no_rooms=1
   ========= */
$('form-hotels').addEventListener('submit', (e)=>{
  e.preventDefault();
  const dest = $('h-dest').value.trim();
  const ci   = toYMD($('h-in').value);
  const co   = toYMD($('h-out').value);
  const ad   = Math.max(1, parseInt($('h-adults').value || '2', 10));
  const rooms= Math.max(1, parseInt($('h-rooms').value  || '1', 10));
  if(!dest || !ci || !co){ alert('Compila destinazione e date'); return; }

  const url = new URL('https://www.booking.com/searchresults.html');
  url.searchParams.set('ss', dest);
  url.searchParams.set('checkin', ci);
  url.searchParams.set('checkout', co);
  url.searchParams.set('group_adults', ad);
  url.searchParams.set('no_rooms', rooms);
  // opzionale: affiliate id
  if(BKG_AID) url.searchParams.set('aid', BKG_AID);

  window.open(url.toString(), '_blank', 'noopener');
});

/* =========
   ESPERIENZE → GetYourGuide
   URL “universale”:
   https://www.getyourguide.com/s/?q=Paris&date_from=2025-10-10&date_to=2025-10-15&number_of_participants=2
   (Se una città ha pagina dedicata, GYG reindirizza automaticamente.)
   ========= */
$('form-exps').addEventListener('submit', (e)=>{
  e.preventDefault();
  const q    = $('x-dest').value.trim();
  const df   = toYMD($('x-from').value);
  const dt   = toYMD($('x-to').value);
  const pax  = Math.max(1, parseInt($('x-pax').value || '2', 10));
  if(!q){ alert('Inserisci una destinazione'); return; }

  const url = new URL('https://www.getyourguide.com/s/');
  url.searchParams.set('q', q);
  if(df) url.searchParams.set('date_from', df);
  if(dt) url.searchParams.set('date_to', dt);
  url.searchParams.set('number_of_participants', pax);
  if(GYG_PARTNER_ID) url.searchParams.set('partner_id', GYG_PARTNER_ID);

  window.open(url.toString(), '_blank', 'noopener');
});
</script>
</body>
</html>
