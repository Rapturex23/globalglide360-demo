<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <title>Giappone in 15 giorni (MXP → HND / KIX → MXP) | GlobalGlide360</title>
  <meta name="description" content="Itinerario reale di 15 giorni in Giappone: Tokyo, Hakone (Fuji), Kyoto, Nara, Osaka. Voli open-jaw da MXP, hotel per tappa, attività GetYourGuide, dove mangiare (TripAdvisor).">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Open Graph -->
  <meta property="og:type" content="article">
  <meta property="og:title" content="Giappone in 15 giorni (MXP → HND / KIX → MXP)">
  <meta property="og:description" content="Tokyo • Hakone • Kyoto • Nara • Osaka — voli, hotel city-by-city, attività e ristoranti.">
  <meta property="og:image" content="https://www.globalglide360.com/assets/itinerari/giappone/cover_1200x630.jpg">
  <meta property="og:url" content="https://www.globalglide360.com/itinerari/giappone-15-giorni.html">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Giappone in 15 giorni (MXP → HND / KIX → MXP)">
  <meta name="twitter:description" content="Tokyo • Hakone • Kyoto • Nara • Osaka — voli, hotel city-by-city, attività e ristoranti.">
  <meta name="twitter:image" content="https://www.globalglide360.com/assets/itinerari/giappone/cover_1200x630.jpg">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Config affiliazioni base -->
  <script>
    // Partner GYG + sub_id pagina (usati dal resolver)
    window.GG_CFG = window.GG_CFG || {};
    window.GG_CFG.gyg_partner = "HWU00MZ";
    window.GG_SUBID = "giappone-15-giorni";
  </script>
</head>
<body class="antialiased bg-white text-gray-800">

  <!-- Header dinamico -->
  <div id="include-header"></div>

  <main class="container mx-auto px-4 py-8 max-w-5xl">
    <header class="mb-6">
      <img src="/assets/itinerari/giappone/cover_1200x630.jpg" alt="Giappone 15 giorni" class="w-full rounded-2xl mb-4">
      <h1 class="text-3xl font-bold mb-2">Giappone in 15 giorni</h1>
      <p class="text-gray-600">Tokyo • Hakone (Fuji) • Kyoto • Nara • Osaka — voli da MXP, hotel per tappa, attività e ristoranti</p>
    </header>

    <!-- Switch date -->
    <div class="bg-gray-50 rounded-2xl p-4 mb-6 flex flex-wrap gap-2 items-center">
      <span class="text-sm">Partenza da <strong>MXP</strong>:</span>
      <div id="dateButtons" class="flex flex-wrap gap-2"></div>
    </div>

    <!-- Voli -->
    <section class="mb-8">
      <h2 class="text-xl font-semibold mb-3">Voli</h2>
      <p class="text-sm text-gray-600 mb-3">Open-jaw consigliato: MXP → Tokyo (HND) / Osaka (KIX) → MXP. In alternativa, A/R su Tokyo.</p>
      <div id="flights" class="grid md:grid-cols-2 gap-4"></div>
    </section>

    <!-- Soggiorni -->
    <section class="mb-8">
      <h2 class="text-xl font-semibold mb-3">Dove dormire (notte per notte)</h2>
      <div id="stays" class="space-y-4"></div>
    </section>

    <!-- Attività -->
    <section class="mb-8">
      <h2 class="text-xl font-semibold mb-3">Attività suggerite</h2>
      <div id="activities" class="grid md:grid-cols-2 gap-4"></div>
    </section>

    <!-- Food -->
    <section class="mb-12">
      <h2 class="text-xl font-semibold mb-3">Dove mangiare</h2>
      <div id="food" class="grid md:grid-cols-2 gap-4"></div>
    </section>

    <!-- Trasparenza & FAQ (puoi riusare il blocco dell'index) -->
    <section id="trasparenza" class="max-w-3xl">
      <!-- incolla qui il blocco “Trasparenza & FAQ” se vuoi mostrarlo anche nella pagina -->
    </section>
  </main>

  <!-- Footer dinamico -->
  <div id="include-footer"></div>

  <!-- Dati pagina + builder link (voli/hotel) -->
  <script>
    const ORIGIN_IATA = "MXP";
    const DATA = {
      slug: "giappone-15-giorni",
      title: "Giappone in 15 giorni",
      mainArrival: "HND",
      mainDeparture: "KIX",
      cities: [
        { name:"Tokyo",   nights:5, iataNear:"HND", bookingQuery:"Tokyo",   gygQuery:"Tokyo",   taFoodUrl:"https://www.tripadvisor.it/Restaurants-g298184-Tokyo_Tokyo_Prefecture_Kanto.html" },
        { name:"Hakone",  nights:1, iataNear:"HND", bookingQuery:"Hakone",  gygQuery:"Hakone",  taFoodUrl:"https://www.tripadvisor.it/Restaurants-g298171-Hakone_machi_Ashigarashimo_gun_Kanagawa_Prefecture_Kanto.html" },
        { name:"Kyoto",   nights:5, iataNear:"ITM", bookingQuery:"Kyoto",   gygQuery:"Kyoto",   taFoodUrl:"https://www.tripadvisor.it/Restaurants-g298564-Kyoto_Kyoto_Prefecture_Kinki.html" },
        { name:"Nara",    nights:1, iataNear:"ITM", bookingQuery:"Nara",    gygQuery:"Nara",    taFoodUrl:"https://www.tripadvisor.it/Restaurants-g298198-Nara_Nara_Prefecture_Kinki.html" },
        { name:"Osaka",   nights:3, iataNear:"KIX", bookingQuery:"Osaka",   gygQuery:"Osaka",   taFoodUrl:"https://www.tripadvisor.it/Restaurants-g298566-Osaka_Osaka_Prefecture_Kinki.html" }
      ],
      departures: [
        { start:"2025-10-24", length:15 },
        { start:"2025-11-07", length:15 },
        { start:"2025-11-21", length:15 }
      ]
    };

    const fmt = d => d.toISOString().slice(0,10);
    const addDays = (iso, n) => { const d=new Date(iso+"T12:00:00"); d.setDate(d.getDate()+n); return fmt(d); };

    // ATTENZIONE: questi deep link Skyscanner possono cambiare / rompersi.
    // Li lasciamo così (come richiesto), poi li migriamo alle "routes" o referral API quando vuoi.
    const skyRound = (from,to,dep,ret) => `https://www.skyscanner.it/trasporti/voli/${from}/${to}/${dep}/${ret}/`;
    const skyOne  = (from,to,date)      => `https://www.skyscanner.it/trasporti/voli/${from}/${to}/${date}/`;

    const bookCity= (q,cin,cout) => {
      const u=new URL("https://www.booking.com/searchresults.it.html");
      u.searchParams.set("ss", q);
      u.searchParams.set("checkin", cin);
      u.searchParams.set("checkout", cout);
      u.searchParams.set("group_adults","2"); u.searchParams.set("no_rooms","1"); u.searchParams.set("group_children","0");
      return u.toString();
    };

    function render(startISO){
      // calcolo soggiorni
      let day=0;
      const spans = DATA.cities.map(c => {
        const cin = addDays(startISO, day);
        const cout= addDays(startISO, day + c.nights);
        day += c.nights;
        return { ...c, checkin:cin, checkout:cout };
      });
      const endISO = addDays(startISO, day);

      // VOLI
      const flights = document.getElementById('flights'); flights.innerHTML="";
      const outA = document.createElement('a');
      outA.className="block p-4 rounded-2xl border hover:border-black";
      outA.target="_blank"; outA.textContent = `MXP → ${DATA.mainArrival} (${startISO})`;
      outA.href = skyOne(ORIGIN_IATA, DATA.mainArrival, startISO);
      flights.appendChild(outA);

      const retA = document.createElement('a');
      retA.className="block p-4 rounded-2xl border hover:border-black";
      retA.target="_blank"; retA.textContent = `${DATA.mainDeparture} → MXP (${endISO})`;
      retA.href = skyOne(DATA.mainDeparture, ORIGIN_IATA, endISO);
      flights.appendChild(retA);

      const alt = document.createElement('a');
      alt.className="block p-4 rounded-2xl border hover:border-black";
      alt.target="_blank"; alt.textContent = `Alternativa: A/R MXP ↔ HND`;
      alt.href = skyRound(ORIGIN_IATA, "HND", startISO, endISO);
      flights.appendChild(alt);

      // STAYS (hotel + attività + food)
      const stays = document.getElementById('stays'); stays.innerHTML="";
      spans.forEach(c=>{
        const w=document.createElement('div');
        w.className="p-4 rounded-2xl border space-y-3";
        w.innerHTML = `
          <div class="flex items-center justify-between gap-2">
            <h3 class="font-semibold text-lg">${c.name}</h3>
            <span class="text-sm bg-gray-100 rounded-full px-2 py-1">${c.checkin} → ${c.checkout} (${c.nights} notti)</span>
          </div>
          <div class="flex flex-wrap gap-2">
            <a class="px-3 py-2 rounded-xl bg-black text-white" target="_blank" href="${bookCity(c.bookingQuery,c.checkin,c.checkout)}">Hotel su Booking</a>
            <a class="px-3 py-2 rounded-xl bg-gray-900 text-white cta-gyg" data-gyg="${c.gygQuery}" href="#">Attività a ${c.name}</a>
            <a class="px-3 py-2 rounded-xl bg-gray-200" target="_blank" href="${c.taFoodUrl}">Dove mangiare (TripAdvisor)</a>
          </div>
        `;
        stays.appendChild(w);
      });

      // ATTIVITÀ (macro)
      const acts = document.getElementById('activities'); acts.innerHTML="";
      [spans[0], spans[2]].forEach(c=>{
        const a=document.createElement('a');
        a.className="block p-4 rounded-2xl border hover:border-black cta-gyg";
        a.setAttribute("data-gyg", c.gygQuery);
        a.href = "#";
        a.textContent = `Top attività a ${c.name}`;
        acts.appendChild(a);
      });

      // FOOD (macro)
      const food = document.getElementById('food'); food.innerHTML="";
      [spans[0], spans[2]].forEach(c=>{
        const a=document.createElement('a');
        a.className="block p-4 rounded-2xl border hover:border-black";
        a.target="_blank"; a.textContent = `Ristoranti consigliati a ${c.name} (TripAdvisor)`;
        a.href = c.taFoodUrl;
        food.appendChild(a);
      });

      // Collega/aggiorna le CTA GYG appena create
      if (window.GG_GYG && typeof GG_GYG.wireGygCtas === "function") {
        GG_GYG.wireGygCtas();
      }
    }

    // Date buttons
    const wrap = document.getElementById('dateButtons');
    DATA.departures.forEach((opt,i)=>{
      const b=document.createElement('button');
      b.className="px-3 py-2 rounded-xl bg-white border hover:border-black";
      b.textContent = `${opt.start} • ${opt.length}g`;
      b.onclick = ()=>{
        // reset stile
        [...wrap.querySelectorAll('button')].forEach(x=>x.classList.remove('bg-black','text-white'));
        // selezione
        b.classList.add('bg-black','text-white');
        // render
        render(opt.start);
      };
      wrap.appendChild(b);
      if(i===0) setTimeout(()=>b.click(),0);
    });
  </script>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@graph":[
      {
        "@type":"WebPage",
        "@id":"https://www.globalglide360.com/itinerari/giappone-15-giorni.html",
        "url":"https://www.globalglide360.com/itinerari/giappone-15-giorni.html",
        "name":"Giappone in 15 giorni | GlobalGlide360",
        "description":"Itinerario reale: Tokyo, Hakone, Kyoto, Nara, Osaka. Voli da MXP, hotel per tappa, attività e ristoranti.",
        "breadcrumb":{"@id":"https://www.globalglide360.com/#breadcrumb-giappone15"},
        "publisher":{"@id":"https://www.globalglide360.com/#org"},
        "isPartOf":{"@id":"https://www.globalglide360.com/#website"}
      },
      {
        "@type":"BreadcrumbList",
        "@id":"https://www.globalglide360.com/#breadcrumb-giappone15",
        "itemListElement":[
          {"@type":"ListItem","position":1,"name":"Home","item":"https://www.globalglide360.com/"},
          {"@type":"ListItem","position":2,"name":"Itinerari pronti","item":"https://www.globalglide360.com/#itinerari-pronti"},
          {"@type":"ListItem","position":3,"name":"Giappone – 15 giorni","item":"https://www.globalglide360.com/itinerari/giappone-15-giorni.html"}
        ]
      },
      {
        "@type":"TouristTrip",
        "@id":"https://www.globalglide360.com/itinerari/giappone-15-giorni.html#trip",
        "name":"Giappone – 15 giorni",
        "description":"Itinerario di 15 giorni con tappe multiple e attività prenotabili.",
        "touristType":"Famiglie | Coppie | Amici",
        "itinerary":{
          "@type":"ItemList",
          "itemListElement":[
            {"@type":"ListItem","position":1,"name":"Tokyo – 5 notti"},
            {"@type":"ListItem","position":2,"name":"Hakone – 1 notte"},
            {"@type":"ListItem","position":3,"name":"Kyoto – 5 notti"},
            {"@type":"ListItem","position":4,"name":"Nara – 1 notte"},
            {"@type":"ListItem","position":5,"name":"Osaka – 3 notti"}
          ]
        },
        "departureStation":{"@type":"Airport","name":"Milano Malpensa","iataCode":"MXP"},
        "arrivalStation":{"@type":"Airport","name":"Tokyo Haneda","iataCode":"HND"},
        "provider":{"@id":"https://www.globalglide360.com/#org"},
        "image":["https://www.globalglide360.com/assets/itinerari/giappone/cover_1200x630.jpg"]
      },
      {
        "@type":"Organization",
        "@id":"https://www.globalglide360.com/#org",
        "name":"GlobalGlide360",
        "url":"https://www.globalglide360.com/",
        "logo":{"@type":"ImageObject","url":"https://www.globalglide360.com/assets/logo-gg360.png"}
      },
      {
        "@type":"WebSite",
        "@id":"https://www.globalglide360.com/#website",
        "url":"https://www.globalglide360.com/","name":"GlobalGlide360"
      }
    ]
  }
  </script>

  <!-- Loader partials header/footer (root) -->
  <script>
    const HEADER_PATH="/partials/header.html", FOOTER_PATH="/partials/footer.html";
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        const [h,f] = await Promise.all([fetch(HEADER_PATH), fetch(FOOTER_PATH)]);
        if (h.ok) document.getElementById('include-header').innerHTML = await h.text();
        if (f.ok) document.getElementById('include-footer').innerHTML = await f.text();
      } catch(e) { console.error("Errore caricando i partials:", e); }
    });
  </script>

  <!-- Resolver GYG (necessario per le CTA attività) -->
  <script src="/assets/js/gyg-resolver.js"></script>
</body>
</html>
