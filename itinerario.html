<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Itinerario - GlobalGlide360</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {margin:0;padding:0;box-sizing:border-box;}
    body {font-family:'Inter',sans-serif;background:#f8f9fa;color:#333;}

    header {
      background:#0077b6;padding:15px 30px;text-align:center;
      color:#fff;font-size:22px;font-weight:600;
    }

    .container {
      max-width:900px;margin:30px auto;padding:20px;
    }

    h2 {
      text-align:center;margin-bottom:20px;font-size:28px;
    }

    .section {
      background:#fff;border-radius:12px;padding:20px;margin-bottom:20px;
      box-shadow:0 4px 8px rgba(0,0,0,0.1);
    }

    .section h3 {
      margin-bottom:15px;font-size:22px;color:#0077b6;
    }

    .item {
      display:flex;align-items:flex-start;gap:15px;margin-bottom:15px;
    }
    .item img {
      width:100px;height:80px;object-fit:cover;border-radius:8px;
    }
    .item-content h4 {
      font-size:18px;margin-bottom:5px;
    }
    .item-content a {
      display:inline-block;color:#fff;background:#0077b6;
      padding:6px 12px;border-radius:6px;text-decoration:none;font-size:14px;
    }
    .item-content a:hover {background:#00b4d8;}

    /* TIMELINE */
    .timeline {
      position:relative;margin:20px 0;padding-left:20px;
    }
    .timeline::before {
      content:'';position:absolute;left:8px;top:0;bottom:0;width:2px;background:#0077b6;
    }
    .timeline-day {
      position:relative;padding:10px 20px;margin-bottom:20px;background:#fff;
      border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.1);
    }
    .timeline-day::before {
      content:'';position:absolute;left:-13px;top:18px;width:12px;height:12px;background:#0077b6;border-radius:50%;
    }

    /* QR CODE */
    .qr-container {
      text-align:center;margin-top:30px;
    }
    .qr-container img {
      width:100px;height:100px;
    }
  </style>
</head>
<body>
  <header>GlobalGlide360 - Il tuo itinerario</header>
  <div class="container">
    <h2 id="meta"></h2>

    <div class="section" id="voli-section">
      <h3>‚úàÔ∏è Voli</h3>
      <div id="voli-list"></div>
    </div>

    <div class="section" id="hotel-section">
      <h3>üè® Hotel</h3>
      <div id="hotel-list"></div>
    </div>

    <div class="section" id="attivita-section">
      <h3>üéüÔ∏è Attivit√†</h3>
      <div id="attivita-list"></div>
    </div>

    <div class="section">
      <h3>üóìÔ∏è Itinerario Giornaliero</h3>
      <div class="timeline" id="timeline"></div>
    </div>

    <div class="qr-container">
      <p>Scansiona per condividere l'itinerario</p>
      <canvas id="qrcode"></canvas>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script>
    // Recupera i dati salvati dall'index
    const dati = JSON.parse(localStorage.getItem("itinerario"));
    if (!dati) {
      document.body.innerHTML = "<h2 style='text-align:center;margin-top:50px;'>Nessun itinerario trovato</h2>";
    } else {
      document.getElementById("meta").textContent = `Itinerario per ${dati.meta} (${dati.adulti} adulti, ${dati.bambini} bambini)`;

      // Voli
      const voliList = document.getElementById("voli-list");
      dati.voli.forEach(v => {
        voliList.innerHTML += `
          <div class="item">
            <img src="https://img.icons8.com/ios-filled/100/0077b6/airplane-take-off.png" alt="Volo">
            <div class="item-content">
              <h4>${v.compagnia} - ‚Ç¨${v.prezzo}</h4>
              <a href="${v.link}" target="_blank">Prenota</a>
            </div>
          </div>`;
      });

      // Hotel
      const hotelList = document.getElementById("hotel-list");
      dati.hotel.forEach(h => {
        hotelList.innerHTML += `
          <div class="item">
            <img src="${h.immagine}" alt="${h.nome}">
            <div class="item-content">
              <h4>${h.nome} - ‚Ç¨${h.prezzo}</h4>
              <a href="${h.link}" target="_blank">Prenota</a>
            </div>
          </div>`;
      });

      // Attivit√†
      const attivitaList = document.getElementById("attivita-list");
      dati.attivita.forEach(a => {
        attivitaList.innerHTML += `
          <div class="item">
            <img src="https://img.icons8.com/ios-filled/100/0077b6/ticket.png" alt="Attivit√†">
            <div class="item-content">
              <h4>${a.nome} - ‚Ç¨${a.prezzo}</h4>
              <a href="${a.link}" target="_blank">Prenota</a>
            </div>
          </div>`;
      });

      // Timeline
      const timeline = document.getElementById("timeline");
      dati.giorni.forEach(g => {
        timeline.innerHTML += `
          <div class="timeline-day">
            <strong>Giorno ${g.giorno}</strong>: ${g.descrizione}
            <br>Attivit√†: ${g.attivita.nome}
          </div>`;
      });

      // QR Code
      QRCode.toCanvas(document.getElementById('qrcode'), window.location.href, function (error) {
        if (error) console.error(error);
      });
    }
  </script>
</body>
</html>
